import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs'
import MultiSelect from '../../ch/components/MultiSelect.vue'
import Notification from '../../ch/components/Notification.vue'

<Meta
  title="Components/Form/MultiSelect"
  component={MultiSelect}
  argTypes={{
    variant: {
      control: {
        type: 'select',
        options: ['outline', 'negative'],
      },
    },
    required:   { control: { type: 'boolean' } },
    size: { control: { type: 'select', options: ['sm', 'base', 'lg'] } },
    label: {},
    disabled:   { control: { type: 'boolean' } },
    hideLabel:   { control: { type: 'boolean' } },
    multiple:   { control: { type: 'boolean' } },
    placeholder: {},
    message: {},
    messageType: {
      control: {
        type: 'select',
        options: ['error', 'warning', 'success', 'info'],
      },
    }
  }}
/>

export const Template = (args, { argTypes }) => ({
  props: Object.keys(argTypes),
  components: { MultiSelect },
  template: `
    <div style="padding: 20px 0 100px 0;">
      <MultiSelect
        :variant="variant"
        :size="size"
        :label="label"
        :disabled="disabled"
        :hideLabel="hideLabel"
        :id="id"
        :multiple="multiple"
        :name="name"
        :message="message"
        :messageType="messageType"
        :required="required"
        :placeholder="placeholder"
      >
        <option disabled Multiselected>Choose your country</option>
        <option>Switzerland</option>
        <option>Swaziland</option>
        <option>Sweden</option>
      </MultiSelect>
    </div>
  `,
})

# MultiSelect

<div class="notification notification--warning">
  This is a Vue-only component. Styles are not available in the main CSS file, unless you install the Vue Select library and customize the some styles and CSS variables.
</div>
<div>&nbsp;</div>

## General
- A multi select component is complex to style and customize without using a library. In this style guide, we use [Vue Select](https://vue-select.org/) to handle the logic and style of the select. Vue 2 and 3 are supported. To avoid a pollution of the CSS with Vue-only styles for other frameworks, all CSS definitions are scoped to the demo Vue component.

- The `MultiSelect` component is a wrapper around the `Vue Select` component.

- If you define the `multiple` prop to false, you can use this component instead of the standard `Select` component.
## Example

<Canvas>
  <Story
    name="Example"
    args={{
      variant: 'outline',
      size: 'base',
      label: 'Label',
      disabled: false,
      hideLabel: false,
      name: 'select-name',
      id:'select-id',
      multiple: true,
      placeholder: 'Placeholder',
      variant: 'outline',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Example" />


## Install Vue Select

``` bash
npm install vue-select
```



## Define Vue Select CSS Variables

A couple of existing CSS variables have to be overriden to match the style guide:

``` css
--vs-font-size: inherit;
--vs-line-height: 1.375;
--vs-search-input-placeholder-color: theme('colors.text.400');
--vs-search-input-bg: inherit;
--vs-border-color: theme('colors.text.500');
--vs-border-radius: 0px;
--vs-actions-padding: 4px 3em 0 3px;
--vs-selected-bg: theme('colors.text.100');

--vs-dropdown-option--active-bg: theme('colors.purple.500');
--vs-dropdown-option--active-color: theme('colors.white');

--vs-state-disabled-bg: theme('colors.text.50');
--vs-state-disabled-color: theme('colors.text.400');
--vs-state-disabled-controls-color: theme('colors.text.400');
```

## Override Vue Select CSS Classes

Additionally, some CSS classes have to be overriden to match the style guide:

``` css
.v-select input,
.v-select .vs__selected {
  --vs-input-min-height: calc(var(--input-min-height) - 10px);
  --vs-input-min-height-2xl: calc(var(--input-min-height-2xl) - 8px);
  @apply min-h-[var(--vs-input-min-height)] 2xl:min-h-[var(--vs-input-min-height-2xl)];
}

.v-select.input--lg input,
.v-select.input--lg .vs__selected {
  --vs-input-min-height: calc(var(--input-min-height) - 6px);
  --vs-input-min-height-2xl: calc(var(--input-min-height-2xl) - 6px);
}

.v-select .vs__selected-options {
  @apply pl-2;
}

.v-select.vs--multiple .vs__selected-options:has(.vs__selected) {
  @apply pl-[2px];
}

.v-select.input--error {
  --vs-border-color: theme('colors.red.500');
}
```

If you use the `negative` variant of the MultiSelect, add the following CSS:

``` css
.v-select.input--negative {
  --vs-dropdown-bg: theme('colors.secondary.600');
  --vs-dropdown-color: theme('colors.secondary.100');
  --vs-dropdown-option-color: theme('colors.white');
  --vs-selected-bg: theme('colors.secondary.600');
  --vs-selected-color: theme('colors.white');
  --vs-selected-border-color: theme('colors.secondary.300');
  --vs-search-input-color: theme('colors.secondary.100');
  --vs-dropdown-option--active-bg: theme('colors.purple.600');
  --vs-dropdown-option--active-color: theme('colors.white');
}

.v-select.input--error.input--negative {
  --vs-border-color: theme('colors.red.300');
}
```


